<!-- User Section -->
{% if user.is_authenticated %}
    <div class="p-4 border-t border-white border-opacity-10 bg-black bg-opacity-20 flex-shrink-0">
        <div class="relative">
            <button id="user-menu-button" class="group flex items-center w-full text-white hover:bg-white hover:bg-opacity-10 p-3 rounded-xl transition-all duration-300">
                <div class="flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-blue-400 to-purple-500 mr-3 group-hover:scale-110 transition-transform duration-300 overflow-hidden">
                    {% if user.profile.profile_picture %}
                        <img src="{{ user.profile.profile_picture.url }}" 
                             alt="{{ user.get_full_name|default:user.username }}" 
                             class="w-full h-full object-cover">
                    {% else %}
                        <i class="fas fa-user text-sm"></i>
                    {% endif %}
                </div>
                <div class="flex-1 text-left">
                    <p class="font-medium truncate group-hover:translate-x-1 transition-transform duration-300">{{ user.get_full_name|default:user.username }}</p>
                    <p class="text-xs text-blue-200">Usuario activo</p>
                </div>
                <i class="fas fa-chevron-up ml-2 transform group-hover:rotate-180 transition-transform duration-300" id="chevron-icon"></i>
            </button>
            <div id="user-menu" class="hidden absolute bottom-full left-0 w-full bg-white rounded-xl shadow-2xl mb-3 overflow-hidden animate-slide-down">
                <a href="{% url 'usuarios:profile_edit' %}" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                    <i class="fas fa-user-edit mr-3 text-gray-500"></i>
                    <span class="font-medium">Editar Perfil</span>
                </a>
                
                <hr class="border-gray-100">
                <a href="{% url 'usuarios:change_password' %}" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                    <i class="fas fa-key mr-3 text-gray-500"></i>
                    <span class="font-medium">Cambiar Contrase침a</span>
                </a>
                <hr class="border-gray-100">
                <a href="{% url 'notificaciones:configuracion' %}" class="flex items-center px-4 py-3 text-gray-700 hover:bg-gray-50 transition-colors duration-200">
                    <i class="fas fa-cog mr-3 text-gray-500"></i>
                    <span class="font-medium">Configuraci칩n</span>
                </a>
                <hr class="border-gray-100">
                <a href="{% url 'logout' %}" class="flex items-center px-4 py-3 text-red-600 hover:bg-red-50 transition-colors duration-200">
                    <i class="fas fa-sign-out-alt mr-3"></i>
                    <span class="font-medium">Cerrar Sesi칩n</span>
                </a>
            </div>
        </div>
    </div>
{% else %}
    <div class="p-4 border-t border-white border-opacity-10 bg-black bg-opacity-20 flex-shrink-0">
        <a href="{% url 'login' %}" class="flex items-center w-full text-white hover:bg-white hover:bg-opacity-10 p-3 rounded-xl transition-all duration-300 group">
            <div class="flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-green-400 to-blue-500 mr-3 group-hover:scale-110 transition-transform duration-300">
                <i class="fas fa-sign-in-alt text-sm"></i>
            </div>
            <span class="font-medium group-hover:translate-x-1 transition-transform duration-300">Iniciar Sesi칩n</span>
        </a>
    </div>
{% endif %}
